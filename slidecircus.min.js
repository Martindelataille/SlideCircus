/*
 * SlideCircus 1.0
 * Author: Martin de la Taille
 *
  * Copyright 2012
   * Free to use and abuse under the MIT license.
   * http://www.opensource.org/licenses/mit-license.php
 */

var SlideShow={construct:function(e){var t=function(e){this.imgArr=document.getElementById(e.id).getElementsByTagName("img");this.imgLen=this.imgArr.length;this.mainElement=e.id;this.count=0;this.timeout=e.timeOut?e.timeOut*1e3:5e3;this.stopOnFocus=e.stopOnFocus?e.stopOnFocus:true;return this};t.prototype.next=function(e){this.count++;return this.count=this.count%this.imgLen};t.prototype.prev=function(e){if(this.count<=0)return this.count=this.imgLen-1;this.count--;return this.count=this.count%this.imgLen};var n=new t(e);this._action.init(n);return SlideShow._utils.change(n)},_utils:{change:function(e,t){SlideShow._utils.hide(e);if(t==="prev"){e.prev()}else if(t==="next"){e.next()}else if(parseInt(t)==t){e.count=t}SlideShow._utils.show(e);SlideShow._utils.timer(e,"next")},hide:function(e){e.imgArr[e.count].className="hide";document.getElementById(e.count).className="";SlideShow._utils.hideDesc(e)},show:function(e){e.imgArr[e.count].className="show";document.getElementById(e.count).className="active"},timer:function(e,t){if(typeof this.cloackTimer!=="undefined"){clearTimeout(this.cloackTimer)}if(t!=="stop"){this.cloackTimer=setTimeout(function(){SlideShow._utils.change(e,t)},e.timeout)}},showDesc:function(e){var t=e.imgArr[e.count].parentNode;var n=t.getElementsByTagName("span");if(typeof n[0]!=="undefined"){n[0].className="show"}},hideDesc:function(e){var t=e.imgArr[e.count].parentNode;var n=t.getElementsByTagName("span");if(typeof n[0]!=="undefined"){n[0].className="hide"}}},_action:{hoverSlide:function(e){var t=document.getElementById(e.mainElement);if(t.attachEvent){t.attachEvent("onmouseover",function(){SlideShow._utils.timer(e,"stop");SlideShow._utils.showDesc(e)});t.attachEvent("onmouseout",function(){SlideShow._utils.change(e);SlideShow._utils.hideDesc(e)})}else if(t.addEventListener){t.addEventListener("mouseover",function(){SlideShow._utils.timer(e,"stop");SlideShow._utils.showDesc(e)},false);t.addEventListener("mouseout",function(){SlideShow._utils.change(e);SlideShow._utils.hideDesc(e)},false)}},displayCtrl:function(e){var t,n=document.getElementById("control"),r="";for(t=0;t<e.imgLen;t++){r+='<a href="#" id="'+t+'"></a>'}n.innerHTML=r},navigate:function(e){var t=document.getElementById(e.mainElement).getElementsByTagName("a"),n=t.length,r;var i=function(t){t=t||window.event;var n=t.srcElement||t.target;var r=n.id;SlideShow._utils.change(e,r)};for(r=0;r<n;r++){var s=t[r];if(s.attachEvent){s.attachEvent("onclick",i)}else if(s.addEventListener){s.addEventListener("click",i,false)}}},init:function(e){this.displayCtrl(e);this.navigate(e);if(e.stopOnFocus)this.hoverSlide(e)}},init:function(e){if(typeof e!=="undefined"&&document.getElementById(e.id)!==null){SlideShow.construct(e)}else{alert("no dom element selected")}}}
